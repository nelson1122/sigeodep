<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:composition template="../templates/layoutTemplate.xhtml">
        <!--=================================================================-->
        <!--======================= CABECERA Y SCRIPTS ======================-->                    
        <ui:define name="head">
            <link href="../../resources/css/style.css" rel="stylesheet" type="text/css" />  
            <style type="text/css">
                .bla div { width: 125px; white-space:nowrap;}
            </style>
            <script type="text/javascript">  
                function clickIdPaint() {                                          
                    jQuery('#IdPaint').click();
                }
            </script> 
        </ui:define>
        <!--=================================================================-->
        <!--=============================== TITULOS =========================-->
        <ui:define name="titlePage">
            SIGEODEP -  CARGA DE REGISTROS DESDE ARCHIVO
        </ui:define>
        <ui:define name="title">
            SIGEODEP -  CARGA DE REGISTROS DESDE ARCHIVO
        </ui:define>
        <!--=================================================================-->
        <!--============================= CONTENIDO =========================-->
        <ui:define name="content">
            <h:form enctype="multipart/form-data" id="IdForm"> 
                <p:growl id="message"  showDetail="true" sticky="true" autoUpdate="true" life="1000"  />
                <br/>
                <p:tabView id="IdTabView"  style=" width: 750px;  margin-left: -375px; left: 50%;" > 
                    <!--===================================================================================-->
                    <!--========================SECCION PARA LA CARGA DEL ARCHIVO==========================-->
                    <p:tab id="tab1" title="ARCHIVO PLANO">  
                        <p:panelGrid style=" margin-left: 30px;">     
                            <p:row>
                                <p:column colspan="4" styleClass="ui-widget-header">
                                    CARGA DE REGISTROS DESDE ARCHIVO
                                    <p:commandButton                                         
                                        value="Relacionar Conjuntos"
                                        actionListener="#{uploadFileMB.relatedRecordSets}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="1">
                                    <h:outputLabel value="Nombre del conjunto de registros: " /> 
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText 
                                        id="IdTagName"                                
                                        disabled="#{uploadFileMB.tagNameDisabled}"
                                        value="#{uploadFileMB.tagName}"
                                        size="70">
                                        <f:ajax 
                                            event="keyup"
                                            listener="#{uploadFileMB.changeTagName}"
                                            render="IdBtnFileSelect IdBtnLoadFile :IdForm:message"/>                                        
                                    </p:inputText>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="1">
                                    <h:outputLabel  
                                        value="Ficha: "/>
                                </p:column>
                                <p:column colspan="2">
                                    <p:selectOneMenu 
                                        id="IdSelectForm"
                                        value="#{uploadFileMB.currentForm}"                                         
                                        disabled="#{uploadFileMB.selectFormDisabled}"> 
                                        <f:selectItems value="#{uploadFileMB.forms}"/>  
                                        <f:ajax
                                            render="IdSelectOneMenuSource IdDelimiter IdAccordionPanel:IdSelectOneListVarExpected IdCurrentForm"/>
                                    </p:selectOneMenu>  
                                </p:column>
                                <p:column colspan="1">
                                    <h:outputLabel
                                        id="IdCurrentForm"
                                        value="#{uploadFileMB.currentForm}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="1">
                                    <h:outputLabel value="Fuente: "/> 
                                </p:column>
                                <p:column colspan="3">
                                    <p:selectOneMenu 
                                        id="IdSelectOneMenuSource" 
                                        value="#{uploadFileMB.currentSource}" 
                                        disabled="#{uploadFileMB.selectSourceDisabled}">                                  
                                        <f:selectItems value="#{uploadFileMB.sources}"/>
                                    </p:selectOneMenu> 
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="1">
                                    <h:outputLabel
                                        value="Delimitador: "/>  
                                </p:column>
                                <p:column colspan="3">
                                    <p:selectOneMenu 
                                        id="IdDelimiter" 
                                        value="#{uploadFileMB.currentDelimiter}" 
                                        disabled="#{uploadFileMB.selectDelimiterDisabled}">                                  
                                        <f:selectItems value="#{uploadFileMB.delimiters}"/>
                                    </p:selectOneMenu> 
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="1">
                                    <h:outputLabel
                                        value="Archivo: " />
                                </p:column>
                                <p:column colspan="3">
                                    <p:fileUpload 
                                        id="IdBtnFileSelect"
                                        value="#{uploadFileMB.file}" 
                                        disabled="#{uploadFileMB.selectFileUploadDisabled}"
                                        mode="simple"                                         
                                        update="IdBtnLoadFile"/> 
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="4" styleClass="ui-widget-header">
                                    <p:commandButton 
                                        id="IdBtnLoadFile" 
                                        disabled="#{uploadFileMB.btnLoadFileDisabled}" 
                                        value="Cargar" 
                                        ajax="false"                                     
                                        actionListener="#{uploadFileMB.upload}"/>
                                    <p:commandButton 
                                        disabled="#{uploadFileMB.btnResetDisabled}" 
                                        value="Reiniciar"                                         
                                        onclick="confirmation.show()"/>                                     
                                    <h:outputLabel                                         
                                        id="IdNameFile"
                                        value="#{uploadFileMB.nameFile}"/>


                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab>  
                    <!--===================================================================================-->
                    <!--========================SECCION PARA LA APLICACION DE FILTROS======================-->                    
                    <p:tab title="FILTROS" >
                        <p:accordionPanel id="IdAccordionPanel2" activeIndex="-1">
                            <!--======================== Copiar Columnas ======================-->
                            <p:tab title="Copiar Columnas">
                                <p:panelGrid >
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Variable a copiar"/>  
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Valores de la variable"/>  
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectOneListbox 
                                                id="copyFieldsListBox" 
                                                style="height:200px; width: 300px; " 
                                                value="#{copyMB.copy_field}"                                                            >
                                                <f:selectItems value="#{copyMB.fields}"/>    
                                                <f:ajax                                             
                                                    event="change" 
                                                    listener="#{copyMB.changeFieldCopy}"                                                                   
                                                    render="copyValuesListBox copyPrefix"/>
                                            </p:selectOneListbox>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneListbox 
                                                id="copyValuesListBox" 
                                                style="height:200px; width: 300px;" >
                                                <f:selectItems value="#{copyMB.values}"/>    
                                            </p:selectOneListbox>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Número de copias"/>  
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Prefijo"/>  
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <p:spinner id="copyNCopies" 
                                                       value="#{copyMB.copy_ncopies}"
                                                       min="1" max="20" /> 
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:inputText 
                                                id="copyPrefix"                       
                                                value="#{copyMB.copy_prefix}"/> 
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:commandButton 
                                                id="copyUndo"                                   
                                                actionListener="#{copyMB.undoCopy}"
                                                value="Deshacer" 
                                                disabled="#{copyMB.btnCopyDisable}"
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox mergePickList replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet copyUndo renameValuesFieldsListBox"/>
                                            <p:commandButton 
                                                id="copyButtonSave"                                   
                                                actionListener="#{copyMB.saveCopies}"
                                                value="Copiar" 
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox mergePickList replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet copyUndo renameValuesFieldsListBox"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--======================== Eliminar Columnas ======================-->
                            <p:tab title="Eliminar Columnas" >
                                <p:panelGrid >
                                    <p:row>
                                        <p:column styleClass="ui-widget-header" colspan="2">
                                            <h:outputLabel value="Variables a elimnar"/>  
                                        </p:column>              
                                    </p:row>                                        
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:pickList id="deletePickList" value="#{copyMB.delete_pickfields}" 
                                                        var="field"
                                                        itemLabel="#{field}" itemValue="#{field}" 
                                                        showTargetControls="true" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:commandButton 
                                                id="undoDelete"                                 
                                                actionListener="#{copyMB.undoDelete}"
                                                value="Deshacer"
                                                disabled="#{copyMB.btnDeleteDisable}"
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox mergePickList replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet undoDelete renameValuesFieldsListBox"/>   
                                            <p:commandButton 
                                                id="deleteButton"                                 
                                                actionListener="#{copyMB.deleteFields}"
                                                value="Eliminar"
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox mergePickList replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet undoDelete renameValuesFieldsListBox"/>
                                        </p:column>                
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--======================== Filtrar registros ======================-->
                            <p:tab title="Filtrar Registros">
                                <p:panelGrid>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header" colspan="2">
                                            <h:outputLabel value="Variable a filtrar"/>  
                                        </p:column>              
                                    </p:row>  
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:selectOneListbox 
                                                id="filterFieldsListBox" 
                                                style="height:200px; width: 400px; " 
                                                value="#{copyMB.filter_field}"                                                            >
                                                <f:selectItems value="#{copyMB.fields}"/>    
                                                <f:ajax                                             
                                                    event="change" 
                                                    listener="#{copyMB.changeFieldFilter}"                                                                   
                                                    render="filterDataTable"/>
                                            </p:selectOneListbox>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:dataTable id="filterDataTable" value="#{copyMB.filter_queryModel}" var="fields" 
                                                         rowKey="#{fields}" rows="10" paginator="true"
                                                         selection="#{copyMB.filter_selected}" >
                                                <p:column selectionMode="multiple" />
                                                <p:columns value="#{copyMB.filter_headers}" var="headers" columnIndexVar="index">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{copyMB.filter_field_names.get(index)}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{fields[headers]}"/>
                                                </p:columns>
                                                <f:facet name="footer">  
                                                    <p:commandButton value="Deshacer" icon="ui-icon-search"
                                                                     actionListener="#{copyMB.redoFilter}"
                                                                     update="filterDataTable :IdForm:IdTabView:IdAccordionPanel2:replicateSheet"
                                                                     disabled="#{copyMB.btnFilterDisable}"/>  
                                                    <p:commandButton value="Filtrar" icon="ui-icon-search"
                                                                     actionListener="#{copyMB.deleteRecords}"
                                                                     update="filterDataTable :IdForm:IdTabView:IdAccordionPanel2:replicateSheet"/>  
                                                </f:facet>                              
                                            </p:dataTable>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--======================== Dividir Columna ======================-->
                            <p:tab title="Dividir Columna">
                                <p:panelGrid >
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Columnas actuales"/>  
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Valores actuales"/>  
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectOneListbox 
                                                id="splitFieldsListBox" 
                                                style="height:200px; width: 300px; " 
                                                value="#{copyMB.split_field}"                                                            >
                                                <f:selectItems value="#{copyMB.fields}"/>    
                                                <f:ajax                                             
                                                    event="change" 
                                                    listener="#{copyMB.changeFieldSplit()}"                                                                   
                                                    render="splitValuesListBox"/>
                                            </p:selectOneListbox>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneListbox 
                                                id="splitValuesListBox" 
                                                style="height:200px; width: 300px;"                                                   >
                                                <f:selectItems value="#{copyMB.values}"/>    
                                            </p:selectOneListbox>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Nuevos nombres de columna"/>  
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Separador"/>  
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:inputText 
                                                id="splitFieldName1"                       
                                                value="#{copyMB.split_field_name1}"/>
                                            <h:inputText 
                                                id="splitFieldName2"                       
                                                value="#{copyMB.split_field_name2}"/>
                                        </p:column>
                                        <p:column>
                                            <h:inputText 
                                                id="splitDelimiter"                                
                                                value="#{copyMB.split_delimiter}">
                                                <p:ajax event="keyup" listener="#{copyMB.setRenders}"
                                                        update="splitWrapper" /> 
                                            </h:inputText>
                                            <h:panelGroup id="splitWrapper">
                                                <h:outputText id="splitOutput" 
                                                              rendered="#{copyMB.split_rendered}" value="Incluir digitos: " />  
                                                <p:selectBooleanCheckbox id="splitCheck" 
                                                                         rendered="#{copyMB.split_rendered}" />
                                            </h:panelGroup>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:commandButton 
                                                id="splitUndo"                                   
                                                actionListener="#{copyMB.undoSplit}"
                                                value="Deshacer" 
                                                disabled="#{copyMB.btnSplitDisable}"
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox splitDataTable mergePickList replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet splitUndo renameValuesFieldsListBox"/>                                            
                                            <p:commandButton 
                                                id="splitButtonSplit"                                   
                                                actionListener="#{copyMB.divideAField}"
                                                value="Dividir" 
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox splitDataTable mergePickList replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet splitUndo renameValuesFieldsListBox :IdForm:IdTabView :IdForm:message"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:dataTable id="splitDataTable" value="#{copyMB.split_newfields}" var="newfields" 
                                                         paginator="true" rows="10"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15">
                                                <p:columns value="#{copyMB.split_newheaders}" var="newheaders" columnIndexVar="split_index">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{newheaders}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{newfields.get(split_index)}"/>
                                                </p:columns>
                                            </p:dataTable>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--======================== Unir Columna ======================-->
                            <p:tab title="Unir Columnas">
                                <p:panelGrid >
                                    <p:row>
                                        <p:column colspan="2" styleClass="ui-widget-header">
                                            <h:outputLabel value="Variables a unir"/>  
                                        </p:column>             
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:pickList id="mergePickList" value="#{copyMB.merge_pickfields}" 
                                                        var="field"
                                                        itemLabel="#{field}" itemValue="#{field}" 
                                                        showTargetControls="true" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Nombre de la nueva columna"/>  
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Separador"/>  
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:inputText 
                                                id="mergeFieldName"                                
                                                value="#{copyMB.merge_fieldname}"/>
                                        </p:column>
                                        <p:column>
                                            <h:inputText 
                                                id="mergeDelimiter"                                
                                                value="#{copyMB.merge_delimiter}"/>
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:commandButton 
                                                id="undoMerge"                                   
                                                actionListener="#{copyMB.undoMerge}"
                                                value="Deshacer"
                                                disabled="#{copyMB.btnMergeDisable}"
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox mergePickList mergeDataTable replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet undoMerge renameValuesFieldsListBox">
                                            </p:commandButton>
                                            <p:commandButton 
                                                id="mergeButtonMerge"                                   
                                                actionListener="#{copyMB.mergeFields}"
                                                value="Unir"
                                                update="copyFieldsListBox copyValuesListBox deletePickList filterFieldsListBox splitFieldsListBox splitValuesListBox mergePickList mergeDataTable replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet undoMerge renameValuesFieldsListBox">                     
                                            </p:commandButton>
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:dataTable id="mergeDataTable" value="#{copyMB.merge_newfields}" var="newfields" 
                                                         paginator="true" rows="10"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15">
                                                <p:columns value="#{copyMB.merge_newheaders}" var="newheaders" columnIndexVar="index">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{newheaders}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{newfields.get(index)}"/>
                                                </p:columns>
                                            </p:dataTable>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--======================== Renombrar Valores ======================-->
                            <p:tab title="Renombrar Valores">
                                <p:panelGrid>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:selectOneListbox 
                                                id="renameValuesFieldsListBox" 
                                                style="height:200px; width: 400px; " 
                                                value="#{copyMB.the_field}"                                                            >
                                                <f:selectItems value="#{copyMB.fields}"/>    
                                                <f:ajax                                             
                                                    event="change" 
                                                    listener="#{copyMB.changeFieldRename}"                                                                   
                                                    render="renameValuesDataTable"/>
                                            </p:selectOneListbox>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:dataTable id="renameValuesDataTable" value="#{copyMB.rename_model}" var="fields" 
                                                         rowKey="#{fields}" rows="10" paginator="true" editable="true">
                                                <p:column>
                                                    <f:facet name="header">
                                                        Valor Actual
                                                    </f:facet>
                                                    <h:outputText value="#{fields.oldValue}" />
                                                </p:column>
                                                <p:column headerText="Nuevo Valor" style="width:125px">
                                                    <p:cellEditor>
                                                        <f:facet name="output">
                                                            <h:outputText value="#{fields.newValue}" />
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputText value="#{fields.newValue}" style="width:100%"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                                <p:column headerText="Edición" style="width:50px">
                                                    <p:rowEditor />
                                                </p:column>
                                                <f:facet name="footer">  
                                                    <p:commandButton value="Deshacer" icon="ui-icon-search"
                                                                     actionListener="#{copyMB.redoRename}"
                                                                     update="renameValuesDataTable :IdForm:IdTabView:IdAccordionPanel2:replicateSheet"
                                                                     disabled="#{copyMB.btnRenameDisable}"/>  
                                                    <p:commandButton value="Renombrar" icon="ui-icon-search"
                                                                     actionListener="#{copyMB.renameRecords}"
                                                                     update="renameValuesDataTable :IdForm:IdTabView:IdAccordionPanel2:replicateSheet"/>  
                                                </f:facet>                              
                                            </p:dataTable>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--======================== Replicar Registros ======================-->
                            <p:tab title="Replicar Registros">
                                <p:panelGrid >
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Variables a replicar"/>  
                                        </p:column>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputLabel value="Variables correspondientes"/>  
                                        </p:column>                
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectManyMenu id="replicateFieldsListBox1" 
                                                              value="#{copyMB.replicate_source}"
                                                              style="height:200px; width: 200px;">
                                                <f:selectItems value="#{copyMB.fields}"/> 
                                            </p:selectManyMenu>
                                        </p:column>
                                        <p:column>
                                            <p:selectManyMenu id="replicateFieldsListBox2" 
                                                              value="#{copyMB.replicate_target}"
                                                              style="height:200px; width: 200px;">
                                                <f:selectItems value="#{copyMB.fields}"/> 
                                            </p:selectManyMenu>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:commandButton 
                                                id="replicateUndo"                                   
                                                actionListener="#{copyMB.undoReplicate}"
                                                value="Deshacer..." 
                                                update="replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet replicateUndo"
                                                disabled="#{copyMB.btnReplicateDisable}"/>
                                            <p:commandButton 
                                                id="replicateReplicate"                                   
                                                actionListener="#{copyMB.replicate}"
                                                value="Replicar" 
                                                update="replicateFieldsListBox1 replicateFieldsListBox2 replicateSheet replicateUndo"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:dataTable id="replicateSheet" value="#{copyMB.replicate_model2}" var="table" 
                                                         paginator="true" rows="10" paginatorPosition="bottom"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15" 
                                                         rowKey="#{table.get(0)}" rowIndexVar="rowIndex"
                                                         scrollable="true" scrollWidth="600"
                                                         resizableColumns="true" >
                                                <p:columns styleClass="bla" 
                                                           value="#{copyMB.replicate_columns2}" var="columns" columnIndexVar="index">
                                                    <f:facet name="header" >
                                                        <h:outputText styleClass="bla" value="#{columns}" />
                                                    </f:facet>
                                                    <h:outputText styleClass="bla" value="#{table.get(index)}" />
                                                </p:columns>
                                            </p:dataTable>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                        </p:accordionPanel>
                    </p:tab>  
                    <!--===================================================================================-->
                    <!--========================SECCION PARA RELACIONES ===================================-->                    
                    <p:tab id="IdTabRelations"  title="RELACIONES" > 
                        <p:accordionPanel id="IdAccordionPanel" activeIndex="-1">
                            <!--======================== SECCION PARA LA RELACION DE VARIABLES ======================-->
                            <p:tab title="RELACION DE VARIABLES">
                                <table border="0" style="margin-left: -29px; overflow: no-display;" >
                                    <tr >
                                        <td>
                                            <p:panelGrid >                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Variables esperadas"/>  
                                                    </p:column>                                       
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Muestra"/>  
                                                    </p:column>                                         
                                                </p:row>  
                                                <p:row>  
                                                    <p:column>
                                                        <!--LISTA DE VARIABLES ESPERADAS-->
                                                        <p:selectOneListbox 
                                                            id="IdSelectOneListVarExpected" 
                                                            value="#{relationshipOfVariablesMB.currentVarExpected}"
                                                            style="height:110px; width: 180px; ">
                                                            <f:selectItems value="#{relationshipOfVariablesMB.variablesExpected}"/>
                                                            <f:ajax 
                                                                event="change"                                            
                                                                listener="#{relationshipOfVariablesMB.changeVarExpected}" 
                                                                render="IdSelectOneListValuesFound IdSelectOneListValuesExpected IdBtnAssociateRelationVar IdBtnRemoveRelationVar IdVariableDescription IdCheckCompareForCode IdSelectDateFormat"/>
                                                        </p:selectOneListbox> 
                                                    </p:column>
                                                    <p:column>
                                                        <!--LISTA DE VALORES ESPERADOS-->
                                                        <p:selectOneListbox 
                                                            disabled="true"
                                                            id="IdSelectOneListValuesExpected"                                                             
                                                            style="height:110px; width: 180px;">
                                                            <f:selectItems value="#{relationshipOfVariablesMB.valuesExpected}"/>							    
                                                        </p:selectOneListbox> 
                                                    </p:column>                                                                                    
                                                </p:row>                                                                               
                                            </p:panelGrid> 
                                        </td>
                                        <td rowspan="2">
                                            <p:panelGrid style="margin-bottom: 4px; "  id="IdVariableDescription">                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Descripción de variable: "/>  
                                                        <h:outputLabel value="#{relationshipOfVariablesMB.currentVarExpected}" />  
                                                    </p:column>                       
                                                </p:row>
                                                <p:row>  
                                                    <p:column >
                                                        <p:inputTextarea value="#{relationshipOfVariablesMB.variableDescription}" rows="3" cols="35" autoResize="false" disabled="true" />
                                                    </p:column>                       
                                                </p:row>
                                            </p:panelGrid>

                                            <p:panelGrid >                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Relaciones creadas"/>  
                                                    </p:column>                                         
                                                </p:row>  
                                                <p:row>  
                                                    <p:column>							
                                                        <!--LISTA DE VARIABLES RELACIONADAS ACTUALMENTE-->
                                                        <p:selectOneListbox  
                                                            value="#{relationshipOfVariablesMB.currentRelatedVars}" 
                                                            style="height:134px; width: 268px; "
                                                            id="IdSelectOneListVarRelated" >
                                                            <f:selectItems value="#{relationshipOfVariablesMB.relatedVars}"/>
                                                            <f:ajax 
                                                                event="change" 
                                                                listener="#{relationshipOfVariablesMB.changeRelatedVars}" 
                                                                render="IdSelectOneListValuesFound IdSelectOneListValuesExpected IdBtnAssociateRelationVar IdBtnRemoveRelationVar IdVariableDescription IdCheckCompareForCode IdSelectDateFormat"/>
                                                        </p:selectOneListbox> 
                                                    </p:column>                                         
                                                </p:row>  
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">							
                                                        <p:commandButton 
                                                            id="IdBtnRemoveRelationVar" 
                                                            disabled="#{relationshipOfVariablesMB.btnRemoveRelationVarDisabled}" 
                                                            actionListener="#{relationshipOfVariablesMB.btnRemoveRelationVarClick}"
                                                            value="Eliminar Relacion"                                             
                                                            style="size: 10px;"                                            
                                                            update="IdSelectOneListValuesDiscarded IdSelectOneListValuesRelated IdSelectOneListVarExpected IdSelectOneListVarFound IdSelectOneListValuesFound IdSelectOneListValuesExpected IdBtnAssociateRelationVar IdBtnRemoveRelationVar IdVariableDescription IdCheckCompareForCode IdSelectDateFormat IdSelectOneListCategoricalVarsRelated IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdSelectOneListVarRelated"/>
                                                    </p:column>                                         
                                                </p:row>
                                            </p:panelGrid>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <p:panelGrid >                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Variables encontradas"/>  
                                                    </p:column>                                       
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Muestra"/>                                                          
                                                    </p:column>                                         
                                                </p:row>  
                                                <p:row> 						    
                                                    <p:column>
                                                        <!--LISTA DE VARIABLES ENCONTRADAS-->
                                                        <p:selectOneListbox 
                                                            id="IdSelectOneListVarFound"
                                                            value="#{relationshipOfVariablesMB.currentVarFound}" 
                                                            style="height:110px; width: 180px; ">
                                                            <f:selectItems value="#{relationshipOfVariablesMB.varsFound}" />                                        
                                                            <f:ajax                                             
                                                                event="change" 
                                                                listener="#{relationshipOfVariablesMB.changeVarFound}"                                                                   
                                                                render="IdSelectOneListValuesFound IdSelectOneListValuesExpected IdBtnAssociateRelationVar IdBtnRemoveRelationVar IdVariableDescription IdCheckCompareForCode IdSelectDateFormat"/>
                                                        </p:selectOneListbox> 
                                                    </p:column>
                                                    <p:column>
                                                        <!--LISTA DE VALORES ENCONTRADOS-->
                                                        <p:selectOneListbox 
                                                            id="IdSelectOneListValuesFound" 
                                                            style="height:110px; width: 180px; "
                                                            disabled="true">
                                                            <f:selectItems value="#{relationshipOfVariablesMB.valuesFound}"/>							    
                                                        </p:selectOneListbox>
                                                    </p:column>                                        
                                                </p:row>
                                            </p:panelGrid> 
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <!--BOTONES DE REALCION DE VARIABLES--> 
                                            <table border="0" >
                                                <tr>
                                                    <td>                                                        
                                                        <p:commandButton 
                                                            id="IdBtnAssociateRelationVar"                                                             
                                                            actionListener="#{relationshipOfVariablesMB.btnAssociateVarClick}"
                                                            value="Asociar" 
                                                            style="size: 10px;"
                                                            update="IdSelectOneListVarExpected IdSelectOneListVarFound IdSelectOneListVarRelated IdSelectOneListValuesFound IdSelectOneListValuesExpected IdBtnAssociateRelationVar IdBtnRemoveRelationVar IdVariableDescription IdCheckCompareForCode IdSelectDateFormat IdSelectOneListCategoricalVarsRelated IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/>
                                                    </td>
                                                    <td>
                                                        <h:outputText value="Por&nbsp;Codigo:&nbsp;"/>
                                                    </td>
                                                    <td>
                                                        <p:selectBooleanCheckbox 
                                                            id="IdCheckCompareForCode"
                                                            style="size: 10px;"  
                                                            value="#{relationshipOfVariablesMB.compareForCode}">  
                                                            <p:ajax
                                                                listener="#{relationshipOfVariablesMB.loadValuesExpected}"
                                                                update="IdSelectOneListValuesFound IdSelectOneListValuesExpected IdBtnAssociateRelationVar IdBtnRemoveRelationVar IdVariableDescription IdCheckCompareForCode IdSelectDateFormat"/>  
                                                        </p:selectBooleanCheckbox>
                                                    </td>
                                                    <td>
                                                        <h:outputLabel  
                                                            value="&nbsp;Formato:&nbsp;"/>
                                                    </td>
                                                    <td>
                                                        <p:selectOneMenu 
                                                            id="IdSelectDateFormat"
                                                            value="#{relationshipOfVariablesMB.currentDateFormat}" 
                                                            disabled="#{relationshipOfVariablesMB.selectDateFormatDisabled}"
                                                            effect="fold" 
                                                            editable="true"> 
                                                            <f:selectItem itemLabel="dd/MM/yyyy" itemValue="dd/MM/yyyy" />  
                                                            <f:selectItem itemLabel="dd/MM/yy" itemValue="dd/MM/yy" />  
                                                            <f:selectItem itemLabel="yyyy/MM/dd" itemValue="yyyy/MM/dd" />  
                                                            <f:selectItem itemLabel="yy/MM/dd" itemValue="yy/MM/dd" />  
                                                            <f:selectItem itemLabel="dd-MM-yyyy" itemValue="dd-MM-yyyy" />  
                                                            <f:selectItem itemLabel="dd-MM-yy" itemValue="dd-MM-yy" />  
                                                            <f:selectItem itemLabel="yyyy-MM-dd" itemValue="yyyy-MM-dd" />  
                                                            <f:selectItem itemLabel="yy-MM-dd" itemValue="yy-MM-dd" />  
                                                        </p:selectOneMenu>
                                                    </td>                                                    
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </p:tab>
                            <!--======================== SECCION PARA LA RELACION DE VALORES ========================-->                    
                            <p:tab title="RELACION DE VALORES"> 
                                <table border="0" style="margin-left: -29px; overflow: no-display;">
                                    <tr>
                                        <td >
                                            <p:panelGrid >                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Variables Categóricas Relacionadas"/>  
                                                    </p:column>                                       
                                                </p:row>  
                                                <p:row>  
                                                    <p:column>
                                                        <!--LISTA DE VARIABLES CATEGORICAS RELACIONADAS-->
                                                        <p:selectOneListbox 
                                                            id="IdSelectOneListCategoricalVarsRelated" 
                                                            value="#{relationshipOfValuesMB.currentCategoricalRelatedVariables}"
                                                            style="height:135px; width: 300px; ">
                                                            <f:selectItems value="#{relationshipOfValuesMB.categoricalRelatedVariables}"/>
                                                            <f:ajax 
                                                                event="change"                                            
                                                                listener="#{relationshipOfValuesMB.changeCategoricalRelatedVariables}" 
                                                                render="IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/>
                                                        </p:selectOneListbox> 
                                                    </p:column>                                                                        
                                                </p:row>
                                            </p:panelGrid> 
                                        </td>
                                        <td>
                                            <p:panelGrid>                            
                                                <p:row>                                                      
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Valores Descartados"/>  
                                                    </p:column>                                         
                                                </p:row>  
                                                <p:row>  
                                                    <p:column>
                                                        <!--LISTA DE VALORES DESCARTADOS-->
                                                        <p:selectManyMenu                                                             
                                                            id="IdSelectOneListValuesDiscarded" 
                                                            value="#{relationshipOfValuesMB.valuesDiscardedSelectedInRelationValues}"
                                                            style="height:95px; width: 355px;">
                                                            <f:selectItems value="#{relationshipOfValuesMB.valuesDiscarded}"/>							    
                                                            <f:ajax 
                                                                event="change"                                            
                                                                listener="#{relationshipOfValuesMB.changeValuesDiscarded}" 
                                                                render="IdBtnRemoveDiscardedValues"/>
                                                        </p:selectManyMenu> 
                                                    </p:column> 
                                                </p:row>
                                                <p:row>  
                                                    <p:column colspan="2" styleClass="ui-widget-header">
                                                        <p:commandButton 
                                                            id="IdBtnRemoveDiscardedValues" 
                                                            disabled="#{relationshipOfValuesMB.btnRemoveDiscardedValuesDisabled}" 
                                                            actionListener="#{relationshipOfValuesMB.btnRemoveDiscardedValuesClick}"
                                                            value="Eliminar" 
                                                            style="size: 10px;"
                                                            update="IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/>
                                                    </p:column>
                                                </p:row>
                                            </p:panelGrid>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td colspan="2">
                                            <p:panelGrid>                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Valores esperados"/>  
                                                    </p:column>                                       
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Valores encontrados"/>  
                                                    </p:column>                                         
                                                </p:row>  
                                                <p:row>  
                                                    <p:column>
                                                        <!--LISTA DE VALORES ESPERADOS-->
                                                        <p:selectOneListbox 
                                                            id="IdSelectOneListValuesExpected2" 
                                                            value="#{relationshipOfValuesMB.currentValueExpected}"
                                                            style="height:110px; width: 320px; ">
                                                            <f:selectItems value="#{relationshipOfValuesMB.valuesExpected}"/>
                                                            <f:ajax 
                                                                event="change"                                            
                                                                listener="#{relationshipOfValuesMB.changeValuesExpected}" 
                                                                render="IdBtnAssociateValues IdBtnAutomaticRelationValues"/>
                                                        </p:selectOneListbox> 
                                                    </p:column>
                                                    <p:column>
                                                        <!--LISTA DE VALORES ENCONTRADOS-->
                                                        <p:selectManyMenu                                                             
                                                            id="IdSelectOneListValuesFound2" 
                                                            value="#{relationshipOfValuesMB.valuesFoundSelectedInRelationValues}"
                                                            style="height:110px; width: 340px;">
                                                            <f:selectItems value="#{relationshipOfValuesMB.valuesFound}"/>
                                                            <f:ajax 
                                                                event="change"                                            
                                                                listener="#{relationshipOfValuesMB.changeValuesFound}" 
                                                                render="IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/>
                                                        </p:selectManyMenu> 
                                                    </p:column>  
                                                </p:row>
                                                <p:row>  
                                                    <p:column colspan="2" styleClass="ui-widget-header">
                                                        <p:commandButton                                         
                                                            id="IdBtnAssociateValues"
                                                            disabled="#{relationshipOfValuesMB.btnAssociateRelationValueDisabled}"  
                                                            actionListener="#{relationshipOfValuesMB.btnAssociateRelationValueClick}"
                                                            value="Asociar"
                                                            update="IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/>
                                                        <p:commandButton 
                                                            id="IdBtnAutomaticRelationValues" 
                                                            disabled="#{relationshipOfValuesMB.btnAutomaticRelationValueDisabled}" 
                                                            actionListener="#{relationshipOfValuesMB.btnAutomaticRelationClick}"
                                                            value="Automático" 
                                                            style="size: 10px;"
                                                            update="IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/> 
                                                        <p:commandButton 
                                                            id="IdBtnDiscardValue" 
                                                            disabled="#{relationshipOfValuesMB.btnDiscardValueDisabled}" 
                                                            actionListener="#{relationshipOfValuesMB.btnDiscardValueClick}"
                                                            value="Descartar" 
                                                            style="size: 10px;"
                                                            update="IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues IdBtnDiscardValue IdBtnRemoveDiscardedValues"/> 
                                                    </p:column>  
                                                </p:row>
                                            </p:panelGrid>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="3">
                                            <p:panelGrid>                            
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <h:outputLabel value="Valores relacionados"/>  
                                                    </p:column>                                                                                                                                
                                                </p:row>  
                                                <p:row>  
                                                    <p:column>
                                                        <!--LISTA DE VALORES RELACIONADOS-->
                                                        <p:selectManyMenu  
                                                            id="IdSelectOneListValuesRelated" 
                                                            style="height:120px; width: 687px;"
                                                            value="#{relationshipOfValuesMB.valuesRelatedSelectedInRelationValues}">
                                                            <f:selectItems value="#{relationshipOfValuesMB.valuesRelated}"/>
                                                            <f:ajax 
                                                                event="change" 
                                                                listener="#{relationshipOfValuesMB.changeValuesRelated}" 
                                                                render="IdBtnRemoveRelationValues" />
                                                        </p:selectManyMenu> 
                                                    </p:column>                                
                                                </p:row>
                                                <p:row>  
                                                    <p:column styleClass="ui-widget-header">
                                                        <p:commandButton 
                                                            id="IdBtnRemoveRelationValues" 
                                                            disabled="#{relationshipOfValuesMB.btnRemoveRelationValueDisabled}" 
                                                            actionListener="#{relationshipOfValuesMB.btnRemoveRelationValueClick}"
                                                            value="Eliminar"                                         
                                                            style="size: 10px;"
                                                            update="IdSelectOneListValuesExpected2 IdSelectOneListValuesFound2 IdSelectOneListValuesRelated IdSelectOneListValuesDiscarded IdBtnAssociateValues IdBtnAutomaticRelationValues IdBtnRemoveRelationValues"/>
                                                    </p:column>                                                                                                                                
                                                </p:row>  
                                            </p:panelGrid>
                                        </td>
                                    </tr>

                                </table>
                            </p:tab>
                            <!--======================== SECCION PARA LAS RELACION GUARDADAS ========================-->                    
                            <p:tab id="IdSavedRelations" title="RELACIONES ALMACENADAS">
                                <table border="0" style="vertical-align: top">
                                    <tr>
                                        <td>
                                            <!--CARGAR DE LA LISTA DE RELACIONES ALMACENADAS-->
                                            <p:panelGrid >
                                                <p:row>
                                                    <p:column colspan="2" styleClass="ui-widget-header">
                                                        <h:outputText value="CONFIGURACIONES GUARDADAS"/>
                                                    </p:column>                                        
                                                </p:row>
                                                <p:row>
                                                    <p:column>
                                                        <!--LISTA DE GRUPOS DE RELACIONES ALMACENADAS-->
                                                        <p:selectOneListbox 
                                                            id="IdSelectOneListRelationGroups" 
                                                            style="height:100px; width: 300px; "
                                                            value="#{storedRelationsMB.currentRelationGroupName}">
                                                            <f:selectItems value="#{storedRelationsMB.relationGroups}"/>                                    
                                                            <f:ajax 
                                                                event="change"                                            
                                                                listener="#{storedRelationsMB.changeRelationGroup}" 
                                                                render="IdBtnLoadConfiguration IdBtnRemoveConfiguration"/>
                                                        </p:selectOneListbox>
                                                    </p:column>                                        
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2" styleClass="ui-widget-header">
                                                        <p:commandButton  
                                                            id="IdBtnLoadConfiguration"
                                                            value="Cargar"                                         
                                                            style="margin:0;"
                                                            disabled="#{storedRelationsMB.btnLoadConfigurationDisabled}"
                                                            onclick="openDialog.show()"    
                                                            update=":IdForm:message"/>                                                        
                                                        <p:commandButton
                                                            id="IdBtnRemoveConfiguration"
                                                            value="Eliminar"
                                                            disabled="#{storedRelationsMB.btnRemoveConfigurationDisabled}"                                                            
                                                            style="margin:0;"
                                                            onclick="removeDialog.show()"/>                                                         
                                                    </p:column>                                        
                                                </p:row>
                                            </p:panelGrid>
                                        </td>
                                        <td style="vertical-align: top; padding-left: 20px;">
                                            <!--GUARDAR CONFIGURACION-->
                                            <p:panelGrid >
                                                <p:row>
                                                    <p:column colspan="2" styleClass="ui-widget-header">
                                                        <h:outputText value="GUARDAR CONFIGURACION"/>
                                                    </p:column>                                        
                                                </p:row>
                                                <p:row>
                                                    <p:column>
                                                        <h:outputText  value="Nombre: "/>
                                                        <p:inputText
                                                            id="IdrelationGroupName"
                                                            style="width: 200px;" 
                                                            value="#{storedRelationsMB.newConfigurationName}">
                                                            <f:ajax 
                                                                event="keyup"                                                                                                            
                                                                render=":IdForm:message IdBtnSaveConfiguration"/>
                                                        </p:inputText>

                                                    </p:column>                                        
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2" styleClass="ui-widget-header">
                                                        <p:commandButton
                                                            id="IdBtnSaveConfiguration"
                                                            disabled="#{storedRelationsMB.btnSaveConfigurationDisabled}"
                                                            value="Guardar"
                                                            style="margin:0;"
                                                            actionListener="#{storedRelationsMB.btnSaveConfiguration}"
                                                            update="IdrelationGroupName IdSelectOneListRelationGroups :IdForm:message"/>  
                                                    </p:column>                                        
                                                </p:row>
                                            </p:panelGrid>
                                        </td>
                                    </tr>
                                </table>

                            </p:tab>
                        </p:accordionPanel>
                    </p:tab> 
                    <!--===================================================================================-->
                    <!--======================== SECCION PARA PROCESAR DATOS ==============================-->
                    <p:tab id="tab4" title="PROCESAMIENTO"> 
                        <p:accordionPanel id="IdAccordionPanel4" activeIndex="-1">

                            <!--======================== SECCION PARA LA  VALIDACION DE LOS DATOS======================-->
                            <p:tab title="VALIDACION DE LOS DATOS">
                                <p:panelGrid 
                                    style=" width: 600px; margin-top:5px; text-align:left;">
                                    <!--VALIDACION DATOS-->
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            VALIDACION
                                        </p:column>
                                    </p:row>                                                                        
                                    <p:row>
                                        <p:column>
                                            <br/>
                                            <h:outputText 
                                                value="Para ingresar los datos se debe validar que esten correctos
                                                mediante esta opcion se indicaran errores y alertas para determinar
                                                su correción."/>  
                                            <br/>
                                            <br/>
                                            <p:progressBar id="IdProgresValidate" interval="500" widgetVar="pbAjaxValidate" ajax="true" value="#{recordDataMB.progressValidate}" labelTemplate="{value}%" styleClass="animated">  
                                                <p:ajax 
                                                    event="complete" 
                                                    listener="#{recordDataMB.onCompleteValidate}" 
                                                    update=":IdForm" 
                                                    oncomplete="startButton.enable();" />  
                                            </p:progressBar>
                                            <br/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <!-- p:commandButton value="Registrar Datos" type="button" onclick="pbAjax.start();startButton2.disable();" widgetVar="startButton2" / -->  
                                            <p:commandButton 
                                                value="Iniciar Validación" 
                                                actionListener="#{recordDataMB.btnValidateClick}" 
                                                onclick="pbAjaxValidate.start(); startButton.disable();"  
                                                widgetVar="startButton"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                            <!--========================SECCION PARA ERRORES ==============================-->
                            <p:tab title="ERRORES">
                                <table border="0" style="margin-left: -29px; overflow: no-display;" >
                                    <tr >
                                        <td>
                                            <p:panelGrid>
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header" colspan="2">
                                                        <h:outputText 
                                                            id="IdSizeErrors"
                                                            value="LISTADO DE ERRORES (#{errorsControlMB.sizeErrorsList})" />
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2">
                                                        <p:selectOneListbox                                         
                                                            value="#{errorsControlMB.currentError}" 
                                                            id="IdListErrors" 
                                                            style="height:120px; width: 100%; " >
                                                            <f:selectItems value="#{errorsControlMB.errors}"/>
                                                            <f:ajax 
                                                                event="change" 
                                                                listener="#{errorsControlMB.changeErrorsList}" 
                                                                render="IdAccordionPanel4:IdValueFound IdAccordionPanel4:IdAcceptedValuesList IdAccordionPanel4:IdSizeErrors IdAccordionPanel4:IdSelectDateFormatAccepted IdAccordionPanel4:IdDescription IdAccordionPanel4:IdBtnSeeRecord :IdForm2:IdDataTableR"/>
                                                        </p:selectOneListbox>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header" > <h:outputText value="Descripción" /> </p:column>
                                                    <p:column styleClass="ui-widget-header"> <h:outputText value="Valores Aceptados" /> </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column> 
                                                        <h:outputText 
                                                            id="IdDescription"
                                                            value="#{errorsControlMB.solution}" 
                                                            style="width: 100px; height:100px;"/> 
                                                    </p:column>
                                                    <p:column>                                                    
                                                        <p:selectOneListbox 
                                                            value="#{errorsControlMB.currentAceptedValue}" 
                                                            id="IdAcceptedValuesList" 
                                                            style="height:70px; width: 350px; " >
                                                            <f:selectItems value="#{errorsControlMB.aceptedValues}"/>
                                                            <f:ajax 
                                                                event="change" 
                                                                listener="#{errorsControlMB.changeAcceptedValuesList}" 
                                                                render="IdNewValue IdBtnSolve" />
                                                        </p:selectOneListbox>                                                        
                                                    </p:column>
                                                </p:row>                                                
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header"> <h:outputText value="Valor encontrado" /> </p:column>
                                                    <p:column styleClass="ui-widget-header"> <h:outputText value="Nuevo valor" />      </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column> 
                                                        <h:inputTextarea
                                                            id="IdValueFound"
                                                            style="width: 300px; "
                                                            value="#{errorsControlMB.valueFound}" 
                                                            disabled="true"/> 
                                                    </p:column>
                                                    <p:column> 
                                                        <h:inputTextarea
                                                            id="IdNewValue"
                                                            style="width: 300px; "
                                                            value="#{errorsControlMB.currentNewValue}"> 
                                                            <f:ajax 
                                                                event="keyup"                                                                                                             
                                                                render="IdBtnSolve"/>
                                                        </h:inputTextarea>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column  styleClass="ui-widget-header" style="text-align: left;">
                                                        <p:commandButton 
                                                            id="IdBtnSolve" 
                                                            value="Resolver"
                                                            disabled="#{errorsControlMB.btnSolveDisabled}"
                                                            actionListener="#{errorsControlMB.solveError}"
                                                            update="IdAccordionPanel4:IdValueFound IdAccordionPanel4:IdAcceptedValuesList IdDescription IdAccordionPanel4:IdListErrors IdSizeErrors IdSelectDateFormatAccepted IdNewValue IdBtnSeeRecord IdHistorialList"/> 
                                                        &nbsp;
                                                        <h:outputText value="Formato: " />
                                                        <p:inputText 
                                                            id="IdSelectDateFormatAccepted"
                                                            value="#{errorsControlMB.currentDateFormatAcepted}" 
                                                            disabled="true"> 
                                                        </p:inputText>

                                                    </p:column>                                                    
                                                    <p:column styleClass="ui-widget-header" style="text-align: right;"> 
                                                        <p:commandButton 
                                                            id="IdBtnSeeRecord" 
                                                            value="Ver Registro"
                                                            disabled="#{errorsControlMB.btnSeeRecordDisabled}"
                                                            onclick="seeRecordDialog.hide(); seeRecordDialog.show();"/> 
                                                    </p:column>
                                                </p:row>
                                            </p:panelGrid>  
                                        </td>
                                    </tr>
                                </table>
                            </p:tab>  
                            <!--========================SECCION PARA HISTORIAL ==============================-->
                            <p:tab id="tab11" title="HISTORIAL DE CORRECIONES">    
                                <p:panelGrid>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <h:outputText value="Listado de cambios : " />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <br/>
                                            <h:outputText value="seleccione una de las correciones realizadas
                                                          y presione deshacer para revertir el cambio realizado" />
                                            <br/>
                                            <br/>
                                            <p:selectOneListbox 
                                                value="#{errorsControlMB.currentCorrection}" 
                                                id="IdHistorialList" 
                                                style="height:200px; width: 99%;" >
                                                <f:selectItems value="#{errorsControlMB.correctionList}"/>
                                                <f:ajax 
                                                    event="change" 
                                                    listener="#{errorsControlMB.changeCorrectionList}" 
                                                    render="IdBtnDeshacer"/>
                                            </p:selectOneListbox>
                                            <br/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <p:commandButton  
                                                disabled="#{errorsControlMB.btnUndoDisabled}"
                                                actionListener="#{errorsControlMB.btnUndoErrorClick}"
                                                id="IdBtnDeshacer"
                                                value="Deshacer"
                                                update="IdHistorialList :IdForm:message"/>
                                        </p:column></p:row>
                                </p:panelGrid>

                            </p:tab>  
                            <!--========================DUPLICIDAD DE REGISTROS ==============================-->
                            <p:tab id="tab20" title="DETECCION DE REGISTROS DUPLICADOS">                                    
                                <p:panelGrid style=" width: 500px; margin-top:5px; text-align:left;">
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            REGISTROS DUPLICADOS
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <br/>
                                            <h:outputText 
                                                value="Es común que algunos registros se encuentren registrados dos veces,
                                                esta seccion permite visualizar aquellos registros con campos similares y 
                                                permitirle al usuario determinar si es duplicado o no."/>  
                                            <br/>                                            
                                            <br/>                                
                                            <p:dataTable 
                                                id="IdSearchTable" var="rowX" 
                                                value="#{duplicateRecordsMB.rowDataTableList}" 
                                                rowKey="#{rowX.column4}"  
                                                selection="#{duplicateRecordsMB.selectedRowDataTable}" 
                                                paginator="true"
                                                rows="10"
                                                paginatorPosition="bottom"                                
                                                scrollable="true"
                                                scrollWidth="650"                                    
                                                pageLinks="3"
                                                selectionMode="single"
                                                resizableColumns="true">                                
                                                <!--p:ajax
                                                    event="rowSelect"
                                                    listener="{duplicateRecordsMB.loadDuplicateRecords}"                                    
                                                    update=":IdForm2:IdDialogEdit :IdForm2:display :IdForm:message" /-->
                                                <p:column headerText="IDENTIFICACION" width="140">  
                                                    #{rowX.column1}  
                                                </p:column>  
                                                <p:column headerText="NOMBRES APELLIDOS" width="335">  
                                                    #{rowX.column2}  
                                                </p:column>  
                                                <p:column headerText="CANTIDAD" width="110">  
                                                    #{rowX.column3}  
                                                </p:column>  
                                                <p:column headerText="ID" width="50">  
                                                    #{rowX.column4}  
                                                </p:column>  
                                            </p:dataTable>                            
                                            <br/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <p:commandButton 
                                                value="Iniciar deteccion" 
                                                actionListener="#{duplicateRecordsMB.btnDetectionClick}"
                                                update="IdSearchTable"/>    
                                            <p:commandButton 
                                                value="Resetear" 
                                                actionListener="#{duplicateRecordsMB.btnResetDetectionClick}"
                                                update="IdSearchTable"/> 
                                            <p:commandButton 
                                                value="Calcular"
                                                actionListener="#{duplicateRecordsMB.loadDuplicateRecords}"                                                                                
                                                update=":IdForm2:IdDialogEdit :IdForm2:display :IdForm:message"
                                                oncomplete="clickIdPaint()"/>  
                                            <p:commandButton
                                                id="IdPaint"
                                                value="Mostrar"                                                
                                                onclick="dialogEdit.show();"/>
                                        </p:column>
                                    </p:row>                                    
                                </p:panelGrid>
                            </p:tab>  
                            <!--======================== SECCION PARA EL REGISTRO DE LA INFORMACION======================-->
                            <p:tab title="REGISTRO DE LA INFORMACION">
                                <p:panelGrid 
                                    style=" width: 600px; margin-top:5px; text-align:left;">
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            REGISTRO
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <br/>
                                            <h:outputText 
                                                value="Una vez que se ha realizado la validación,
                                                la información puede ser almacenada en la base de datos mediante el 
                                                botón registrar datos."/>                                                                           
                                            <br/>
                                            <br/>
                                            <p:progressBar id="IdProgres" interval="500" widgetVar="pbAjax" ajax="true" value="#{recordDataMB.progress}" labelTemplate="{value}%" styleClass="animated">  
                                                <p:ajax 
                                                    event="complete" 
                                                    listener="#{recordDataMB.onComplete}" 
                                                    update=":IdForm" 
                                                    oncomplete="startButton3.disable(); startButton2.disable();" />  
                                            </p:progressBar>
                                            <br/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="ui-widget-header">
                                            <!-- p:commandButton value="Registrar Datos" type="button" onclick="pbAjax.start();startButton2.disable();" widgetVar="startButton2" / -->  
                                            <p:commandButton 
                                                value="Registrar Datos" 
                                                disabled="#{recordDataMB.btnRegisterDataDisabled}"
                                                actionListener="#{recordDataMB.btnRegisterDataClick}" 
                                                onclick="pbAjax.start(); startButton2.disable();"  
                                                widgetVar="startButton2" />  
                                            <p:commandButton 
                                                value="Cancelar" 
                                                disabled="true"
                                                actionListener="#{recordDataMB.cancel}" 
                                                oncomplete="pbAjax.cancel();startButton2.enable();" 
                                                widgetVar="startButton3" />  
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:tab>
                        </p:accordionPanel>
                    </p:tab>
                </p:tabView>  
            </h:form>
        </ui:define>
        <!--=================================================================-->
        <!--==================== CUADROS DE DIALOGOS ========================-->
        <ui:define name="dialogs">
            <h:form id="IdForm2">
                <p:dialog 
                    id="IdSeeRecordDialog" 
                    header="Datos del registro que presenta Errores" 
                    widgetVar="seeRecordDialog" 
                    resizable="false"
                    modal="true" >
                    <div style="width: 600px; overflow:scroll; padding-right: 10px; ">
                        <p:dataTable 
                            value="#{errorsControlMB.dinamicTable.listOfRecords}" 
                            var="listOfRecords"                                        
                            id="IdDataTableR">
                            <p:columns  value="#{errorsControlMB.dinamicTable.titles}" var="titles" columnIndexVar="index">
                                <f:facet name="header" >
                                    <h:outputText value="#{titles}"/>                                                
                                </f:facet>
                                <h:outputText value="#{listOfRecords[index]}"/>
                            </p:columns>
                        </p:dataTable>
                    </div>
                    <p:commandButton                                                                         
                        value="Cerrar" 
                        onclick="seeRecordDialog.hide()"/>
                </p:dialog>
                <p:dialog 
                    id="IdDialogEdit" 
                    header="Comparacion de registros" 
                    widgetVar="dialogEdit" 
                    resizable="false"
                    closable="false"
                    modal="true" >
                    <p:panelGrid id="display">

                        <p:row>
                            <p:column styleClass="ui-widget-header">
                                REGISTRO BASE
                            </p:column>
                        </p:row>                        
                        <p:row>
                            <p:column>
                                <div style="width: 600px;  padding-right: 10px; overflow: scroll; ">
                                    <p:dataTable 
                                        value="#{duplicateRecordsMB.dinamicTable1.listOfRecords}" 
                                        var="listOfRecords"                                        
                                        id="IdDataTable"
                                        >
                                        <p:columns  value="#{duplicateRecordsMB.dinamicTable1.titles}" var="titles" columnIndexVar="index">
                                            <f:facet name="header" >
                                                <h:outputText value="#{titles}"/>                                                
                                            </f:facet>
                                            <h:outputText value="#{listOfRecords[index]}"/>
                                        </p:columns>
                                    </p:dataTable>                                    
                                </div>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column styleClass="ui-widget-header">
                                REGISTROS COINCIDENTES
                            </p:column>
                        </p:row>                        
                        <p:row>
                            <p:column>
                                <div style="width: 600px;  padding-right: 10px; overflow: scroll; ">
                                    <p:dataTable 
                                        value="#{duplicateRecordsMB.dinamicTable2.listOfRecords}" 
                                        var="listOfRecords"
                                        id="IdDataTable2">
                                        <p:columns value="#{duplicateRecordsMB.dinamicTable2.titles}" var="titles" columnIndexVar="index">
                                            <f:facet name="header">
                                                <h:outputText value="#{titles}"/>
                                            </f:facet>
                                            <h:outputText value="#{listOfRecords[index]}"/>
                                        </p:columns>
                                    </p:dataTable>
                                </div>
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column styleClass="ui-widget-header">
                                <p:commandButton                                                                         
                                    value="Cerrar" 
                                    actionListener="#{duplicateRecordsMB.btnDetectionClick}"
                                    update=":IdForm"
                                    onclick="dialogEdit.hide()"/>
                                <p:commandButton                                                                         
                                    value="Editar" />
                                <p:commandButton                                                                         
                                    value="Elimnar" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:dialog>                
                <p:dialog
                    id="IdResetDialog" 
                    modal="true"
                    header="Reiniciar controles"  
                    widgetVar="confirmation"
                    resizable="false"> 
                    <br/>
                    <p:inputTextarea 
                        value="Al reiniciar los controles se perderán todos los cambios que haya realizado, confirma el reinicio los controles para carga de datos desde archivo?" 
                        readonly="true" 
                        style="text-align: center; background: #ebf4fb; font-size: 13px; font-weight: 900; height: 80px; width: 250px;"/>
                    <br/>
                    <br/>                    
                    <p:commandButton                                             
                        value="Si"                                 
                        oncomplete="confirmation.hide();startButton2.enable(); startButton3.enable();" 
                        actionListener="#{recordDataMB.btnResetClick}" 
                        update=":IdForm" /> 
                    <p:commandButton 
                        value="No" 
                        onclick="confirmation.hide()"/>   

                </p:dialog>                
                <p:dialog 
                    id="IdOpenDialog"                                                             
                    resizable="false"
                    header="Cargar Configuración?" 
                    widgetVar="openDialog" 
                    modal="true"
                    style="width: 100px; height: 120px;">                                                             
                    <br/>
                    <p:inputTextarea 
                        value=" Al cargar una configuración existente se perderan todos los cambio que haya relaizado hasta el momento, confirma que desea relizar la carga de el grupo de relaciones seleccionado?" 
                        readonly="true" 
                        style="text-align: center; background: #ebf4fb; font-size: 13px; font-weight: 900; width: 300px; height: 100px;"/>
                    <br/>
                    <br/>
                    <p:commandButton                                                                                                                                                         
                        value="Cargar" 
                        actionListener="#{storedRelationsMB.btnLoadConfigurationClick}"
                        onclick="openDialog.hide()"
                        update=":IdForm:IdTabView :IdForm:message"/>   
                    <p:commandButton                                                                         
                        value="Cancelar" 
                        onclick="openDialog.hide()"/> 
                </p:dialog>
                <p:dialog
                    id="IdRemoveDialog"  
                    modal="true"
                    header="Confirmar la eliminación"                                     
                    widgetVar="removeDialog">  
                    <br/>
                    <p:inputTextarea 
                        value="confirma la eliminación del grupo de relaciones seleccionado?" 
                        readonly="true" 
                        style="text-align: center; background: #ebf4fb; font-size: 13px; font-weight: 900; height: 48px;"/>
                    <br/>
                    <br/>
                    <p:commandButton  
                        id="confirm"
                        oncomplete="removeDialog.hide()"
                        actionListener="#{storedRelationsMB.btnRemoveConfigurationConfirmationClick}"
                        value="Aceptar"
                        update=":IdForm:message :IdForm:IdTabView:IdAccordionPanel:IdSelectOneListRelationGroups"/>   
                    <p:commandButton 
                        id="decline"
                        value="Cancelar" 
                        onclick="removeDialog.hide()"
                        type="button"/>   
                </p:dialog>
            </h:form>
        </ui:define>
    </ui:composition>
</html>

